const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-bAavSm5I.js","assets/vendor-DrDTB3wU.js","assets/index-BCvPizXX.js"])))=>i.map(i=>d[i]);
import{r as e,R as t,j as s,N as n,L as i,u as r,a,b as o,M as c,c as l,d,O as u,B as h,e as p}from"./vendor-DrDTB3wU.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const m={},x=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=s?.nonce||s?.getAttribute("nonce");n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in m)return;m[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,i&&n.setAttribute("nonce",i),document.head.appendChild(n),t?new Promise((t,s)=>{n.addEventListener("load",t),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};function f(e,t){const s=[],n=`add${t}`;for(let i=0;i<t;i++)for(let r=0;r<t;r++){const a=i+r;a>=e&&a<=t&&(s.push({id:`${n}_${i}_${r}`,cid:"math",tid:n,text:`${i} + ${r} = ?`,answer:`${a}`,variants:[a,a+1,a>10?a-10:a+2,a>0?a-1:a+3].map(e=>e.toString())}),s.push({id:`${n}_${i}_${r}m`,tid:n,cid:"math",text:`${i} + ? = ${a}`,answer:`${r}`,variants:[r,r+1,r>10?r-10:r+2,r>0?r-1:r+3].map(e=>e.toString())}))}return{topic:{cid:"math",id:n,name:`Sudėtis iki ${t}`},items:s}}const g=[{width:"76",height:"100",viewBox:"0 0 4.8529978 9.5163436",g:'<g transform="translate(-3.5824384,-2.0766052)">\n    <path style="fill:var(--secondary)"\n       d="m 4.9338213,11.497846 c -0.0179,-0.0582 -0.056,-0.27208 -0.0845,-0.47526 -0.0286,-0.20319 -0.16774,-0.53777 -0.3093,-0.74352 -0.66159,-0.96159 -0.9542,-1.94103 -0.95751,-3.20505 -0.003,-1.0249 0.0859,-1.31234 0.40461,-1.31234 0.10959,0 0.29362,-0.11103 0.421,-0.254 0.23339,-0.26193 0.46043,-0.31521 0.72953,-0.17119 0.11481,0.0614 0.20687,0.0418 0.35685,-0.0762 0.28467,-0.22392 0.50766,-0.24148 0.78216,-0.0616 0.13048,0.0855 0.25758,0.05915 0.30603,0.0841 1.46575,0.754805 0.58141,0.295684 1.23487,1.00221 0.0305,0.03296 0.11597,0.0694 0.20528,0.0694 0.0893,0 0.22668,0.0981 0.30526,0.21804 0.12611,0.19247 0.13336,0.33396 0.0619,1.2065 -0.0754,0.91961 -0.10877,1.04781 -0.47959,1.84049 -0.31424,0.67175 -0.39857,0.94494 -0.39857,1.29117 v 0.43913 l -0.40217,0.002 c -0.22119,8.4e-4 -0.76412,0.0573 -1.2065,0.12548 -0.98084,0.15117 -0.92955,0.15005 -0.96926,0.0212 z"\n    /></g>'},{width:"76",height:"100",viewBox:"0 0 4.8518581 9.4434147",g:'<path style="fill:var(--secondary)" d="m 3.2881648,9.39972 c -0.10343,-0.0575 -1.22839,-0.20526 -2.19656,-0.28847 -0.19370001,-0.0166 -0.20609001,-0.0462 -0.18510001,-0.4417 0.0185,-0.34807 -0.0319,-0.52825 -0.2818,-1.00766 -0.39226,-0.75256 -0.52883,-1.25793 -0.59823,-2.21378 -0.0686,-0.94404 -0.0218,-1.11083 0.35589,-1.26863 l 0.29451,-0.12305 -0.0523,-0.56772 c -0.0288,-0.31224 -0.0898,-0.98681 -0.13572,-1.49905 -0.0459,-0.51223 -0.10076,-1.0939 -0.12195,-1.29259 C 0.32280479,0.28327 0.52303479,0 0.85968479,0 1.2952548,0 1.3582848,0.14416 1.5635148,1.60973 c 0.10622,0.75859 0.23219,1.4183 0.27991,1.46602 0.0592,0.0593 0.13651,0.0418 0.24361,-0.0551 0.19805,-0.17924 0.55624,-0.18277 0.73179,-0.007 0.10459,0.10459 0.22746,0.12196 0.54949,0.0777 0.38903,-0.0535 0.42921,-0.0408 0.64733,0.20395 0.13228,0.14846 0.31649,0.261 0.42724,0.261 0.32121,0 0.40772,0.28657 0.40897,1.35466 0.001,1.17506 -0.19308,1.86761 -0.82367,2.93341 -0.26,0.43946 -0.43297,0.84717 -0.47666,1.12358 -0.0794,0.50218 -0.0941,0.52624 -0.26336,0.43207 z"/>'},{width:"76",height:"100",viewBox:"0 0 4.8409834 9.8105488",g:'<path style="fill:var(--secondary)" d="m 2.3856038,9.6843797 c -0.46567,-0.0632 -0.98954,-0.11985 -1.16417,-0.12594 l -0.31750001,-0.0111 v -0.43961 c 0,-0.32874 -0.0728,-0.58777 -0.28852,-1.02718 -0.41218,-0.83939 -0.53934,-1.32172 -0.59634,-2.26185 -0.0564,-0.93092 -0.004,-1.10129 0.38045,-1.2353 l 0.26117,-0.091 -0.0545,-0.61637 c -0.03,-0.339 -0.10702,-1.1684097 -0.17116,-1.8431397 -0.13573,-1.42782 -0.0885,-1.60955 0.4182,-1.60955 0.36385001,0 0.49595001,0.16545 0.56474001,0.7073 0.27715,2.1830997 0.32606,2.4372697 0.47876,2.4881697 0.10509,0.035 0.13746,-0.20919 0.28322,-2.1371397 0.0528,-0.6985 0.13489,-1.31762 0.18239,-1.37583 C 2.4098438,0.04764 2.5900138,0 2.7627138,0 c 0.50653,0 0.5397,0.14115 0.4333,1.84394 -0.0499,0.79833 -0.0907,1.5134897 -0.0907,1.5892297 0,0.11291 0.0588,0.12778 0.3266,0.0825 0.29275,-0.0495 0.34921,-0.0283 0.54486,0.20422 0.1376,0.16353 0.29743,0.25941 0.43243,0.25941 0.3469,0 0.43178,0.2663 0.43178,1.35466 0,0.84558 -0.0315,1.06657 -0.23932,1.67985 -0.13162,0.38839 -0.40481,0.97894 -0.60709,1.31233 -0.20227,0.33339 -0.38986,0.71093 -0.41685,0.83899 -0.027,0.12806 -0.0688,0.32808 -0.093,0.4445 -0.0242,0.11642 -0.0909,0.2067 -0.14816,0.20063 -0.0573,-0.006 -0.48522,-0.0627 -0.95089,-0.12591 z" />'},{width:"76",height:"100",viewBox:"0 0 4.9298683 9.8242179",g:'<path style="fill:var(--secondary)"\n       d="m 2.9360489,9.8038385 c -0.0151,-0.0151 -0.40625,-0.069 -0.86925,-0.11969 -0.46299,-0.0507 -0.918,-0.10341 -1.01113,-0.11704 -0.14477,-0.0212 -0.16503,-0.0775 -0.13964,-0.38833 0.0241,-0.29535 -0.0448,-0.51875 -0.36726,-1.19118 -0.41931,-0.87426 -0.54329,-1.45046 -0.54866000206,-2.54995 C -0.0018911,4.9462885 0.0223089,4.8534285 0.1855089,4.7391485 c 0.10349,-0.0725 0.25924,-0.1318 0.34611,-0.1318 0.13454,0 0.15087,-0.047 0.1102,-0.3175 -0.0263,-0.17462 -0.10923,-1.03461 -0.18438,-1.91109 -0.12929,-1.50776995 -0.12869,-1.60238995 0.0111,-1.75683995 0.17954,-0.19839 0.64885,-0.21694 0.80257,-0.0317 0.06,0.0723 0.17755,0.68912995 0.26115,1.37064995 0.17649,1.43878 0.22958,1.71516 0.32949,1.71516 0.13733,0 0.16185,-0.14567 0.25789,-1.53231 0.0529,-0.76378 0.12255,-1.52172995 0.15477,-1.68433995 0.0973,-0.49089 0.63846,-0.62499 0.89678,-0.22222 0.0891,0.13889 0.0991,0.3411 0.0443,0.89886995 -0.13649,1.39162 -0.18757,2.58426 -0.10697,2.49767 0.0433,-0.0466 0.25776,-0.57997 0.47647,-1.18534 0.54894,-1.51940995 0.54869,-1.51898995 0.92363,-1.55027995 0.27148,-0.0227 0.32635,0.004 0.39726,0.19007995 0.0656,0.17255 0.006,0.46081 -0.29572,1.42329 -0.20788,0.6638 -0.37832,1.26883 -0.37874,1.3445 -4.8e-4,0.0851 0.0952,0.15677 0.25097,0.18793 0.31456,0.0629 0.37141,0.25658 0.3767,1.28315 0.006,1.13325 -0.26079,2.02793 -0.92085,3.09006 -0.23974,0.38579 -0.35459,0.67657 -0.38455,0.97367 -0.0413,0.40998 -0.0515,0.42388 -0.31647,0.43207 -0.15056,0.005 -0.2861,-0.004 -0.30119,-0.019 z"\n    />'},{width:"76",height:"100",viewBox:"0 0 5.686152 9.8028002",g:'<g transform="translate(-3.2477354,-1.849306)">\n    <path style="fill:var(--secondary)"\n       d="m 5.4629863,11.543996 -1.05833,-0.0923 0.0243,-0.3741 c 0.0204,-0.3141 -0.0369,-0.47938 -0.35717,-1.03064 -0.29754,-0.5120796 -0.43818,-0.8937996 -0.63916,-1.7347796 -0.28993,-1.2132 -0.27473,-1.28689 0.30493,-1.47819 0.34318,-0.11326 0.33521,0.0416 0.11311,-2.19751 -0.18688,-1.88405 -0.16818,-2.05563 0.23514,-2.15686 0.29375,-0.0737 0.58381,0.14145 0.64628,0.47943 0.0285,0.15399 0.12868,0.79148 0.22271,1.41664 0.094,0.62517 0.18968,1.15539 0.21257,1.17828 0.0229,0.0229 0.0416,-0.72673 0.0416,-1.66583 0,-1.59455 0.0112,-1.71864 0.16933,-1.87677 0.21939,-0.21939 0.52447,-0.21568 0.72771,0.009 0.14524,0.16044 0.16427,0.35057 0.19124,1.91033 0.0165,0.95268 0.0444,1.71766 0.0622,1.69995 0.0177,-0.0177 0.13028,-0.62019 0.25015,-1.33883 0.11988,-0.71864 0.25793,-1.41013 0.30679,-1.53664 0.1523,-0.39434 0.69959,-0.41552 0.79615,-0.0308 0.0422,0.16795 -0.0914,1.64107 -0.26937,2.97017 -0.0898,0.67111 0.0268,0.41443 0.38395,-0.84479 0.1823,-0.64279 0.38218,-1.20086 0.44418,-1.24016 0.2952,-0.18714 0.66344,-0.0189 0.66259,0.30271 -5.3e-4,0.20294 -0.54971,2.70331 -0.61802,2.81385 -0.0255,0.0412 -0.0902,0.47321 -0.14372,0.95993 -0.10836,0.98469 -0.3558,1.78188 -0.80906,2.6064696 -0.17331,0.3153 -0.32321,0.72548 -0.35105,0.96062 -0.0448,0.37821 -0.0659,0.4093 -0.26965,0.39678 -0.12157,-0.007 -0.69729,-0.0551 -1.27937,-0.10583 z"\n    /></g>'},{width:"76",height:"100",viewBox:"0 0 7.6573344 9.8083534",g:'<g transform="translate(-3.2477354,-1.849306)">\n    <path style="fill:var(--secondary)"\n       d="m 7.4877876,11.557936 -1.13132,-0.0836 0.0412,-0.36569 c 0.0415,-0.36797 -0.0788,-0.69873 -0.48848,-1.34295 -0.14878,-0.23399 -1.13305,-1.46674 -1.37059,-1.7166 -0.0564,-0.0594 -0.24726,-0.28797 -0.42406,-0.508 -0.17679,-0.22004 -0.34111,-0.41912 -0.36514,-0.4424 -0.62132,-0.60196 -0.67629,-1.27 -0.1045,-1.27 0.33174,0 0.68946,0.23834 1.47489,0.98269 0.41242,0.39085 0.78746,0.71064 0.83341,0.71064 0.13102,0 0.10178,-0.81852 -0.10191,-2.85357 l -0.18817,-1.8799 0.19978,-0.17326 c 0.24537,-0.21282 0.43341,-0.21941 0.65971,-0.0232 0.13598,0.11794 0.21136,0.39044 0.35162,1.2712 0.0982,0.6166 0.17853,1.2158 0.17853,1.33155 0,0.11576 0.0381,0.21046 0.0847,0.21046 0.0534,0 0.0847,-0.58638 0.0847,-1.58982 0,-1.76624 0.0508,-1.96618 0.49967,-1.96618 0.4705,0 0.50917,0.1398 0.57533,2.08022 0.0428,1.25555 0.0803,1.6734 0.12849,1.43345 0.0374,-0.18627 0.16284,-0.868 0.27865,-1.51496 0.11582,-0.64695 0.25348,-1.22798 0.30592,-1.29116 0.22493,-0.27103 0.75194,-0.0387 0.75194,0.33142 0,0.0991 -0.0786,0.80345 -0.1746,1.5652 -0.25953,2.05875 -0.20359,2.03806 0.40072,-0.14817 0.1921304,-0.69509 0.2526404,-0.7766 0.5541304,-0.74644 0.45831,0.0459 0.46653,0.17178 0.11313,1.73237 -0.17766,0.78452 -0.37401,1.80741 -0.43633,2.27307 -0.14399,1.07592 -0.3859704,1.86871 -0.8088504,2.65002 -0.20099,0.37134 -0.35432,0.78531 -0.38415,1.03717 -0.0427,0.36085 -0.0745,0.41712 -0.22835,0.4046 -0.0983,-0.008 -0.6878,-0.0522 -1.31003,-0.0982 z"\n    /></g>'}];function j(e){const t={cid:"math",id:`numbers${e}`,name:`Skaičiai iki ${e}`},s=[];for(let n=0;n<=e;n++){const i=0===n?[g[0]]:[],r=Math.floor(n/5);for(let e=0;r>0&&e<r;e++)i.push(g[5]);const a=n%5;a>0&&i.push(g[a]);const o=e>10?" ":"";s.push({id:`${t.id}_${n}`,tid:t.id,cid:t.cid,svg:i,text:`⚫${o}`.repeat(n)+`⚪${o}`.repeat(e-n),answer:`${n}`,variants:[n,n+1,n+2].map(e=>e.toString())})}return{topic:t,items:s}}function v(e,t,s=2){const n=[],i=`div${t}`;for(let r=e;r<t;r++)for(let e=2;e<t;e++){const a=r/e;a>=s&&a<=t&&r%e===0&&(n.push({id:`${i}_${r}_${e}`,tid:i,cid:"math",text:`${r} ÷ ${e} = ?`,answer:`${a}`,variants:[a,a+1,a>10?a-10:a+2,a>0?a-1:a+3].map(e=>e.toString())}),n.push({id:`${i}_${r}_${e}m`,tid:i,cid:"math",text:`${r} ÷ ? = ${a}`,answer:`${e}`,variants:[e,e+1,e>10?e-10:e+2,e>0?e-1:e+3].map(e=>e.toString())}))}return{topic:{cid:"math",id:i,name:`Dalyba iki ${t}`},items:n}}function w(e,t){const s=[],n=`mul${t}`;for(let i=2;i<t;i++)for(let r=2;r<t;r++){const a=i*r;a<=t&&a>=e&&(s.push({id:`${n}_${i}_${r}`,tid:n,cid:"math",text:`${i} × ${r} = ?`,answer:`${a}`,variants:[a,a+1,a>10?a-10:a+2,a>0?a-1:a+3].map(e=>e.toString())}),s.push({id:`${n}_${i}_${r}m`,tid:n,cid:"math",text:`${i} × ? = ${a}`,answer:`${r}`,variants:[r,r+1,r>10?r-10:r+2,r>0?r-1:r+3].map(e=>e.toString())}))}return{topic:{cid:"math",id:n,name:`Daugyba iki ${t}`},items:s}}function y(e,t){const s=[],n=`sub${t}`;for(let i=0;i<t;i++)for(let r=0;r<t;r++){const a=i-r;a>=e&&(s.push({id:`${n}_${i}_${r}`,tid:n,cid:"math",text:`${i} - ${r} = ?`,answer:`${a}`,variants:[a,a+1,a>10?a-10:a+2,a>0?a-1:a+3].map(e=>e.toString())}),s.push({id:`${n}_${t}_${i}_${r}m`,tid:n,cid:"math",text:`${i} - ? = ${a}`,answer:`${r}`,variants:[r,r+1,r>10?r-10:r+2,r>0?r-1:r+3].map(e=>e.toString())}))}return{topic:{cid:"math",id:n,name:`Atimtis iki ${t}`},items:s}}const b={id:"math",name:"Matematika",svg:'\n  <rect style="fill:#fff" width="100%" height="100%" />\n  <path\n    d="M 640,0 H 0 v 480 h 640 m -296.35301,-376.90612 29.3332,-29.333393 37.3334,37.333393 37.3334,-37.333393 29.3332,29.333393 -37.3332,37.3332 37.3332,37.3334 -29.3332,29.3334 -37.3334,-37.3334 -37.3334,37.3334 -29.3332,-29.3334 37.3332,-37.3334 -37.3332,-37.3332 m -181.3334,16 h 133.3334 v 40 h -133.3334 v -40 m 141.3334,221.3332 h -53.3334 v 53.3334 h -40 v -53.3334 h -53.3334 v -40 h 53.3334 v -53.3332 h 40 v 53.3332 h 53.3334 v 40 m 173.3332,32 h -133.3332 v -40 h 133.3332 v 40 m 0,-64 h -133.3332 v -40 h 133.3332 z"\n    style="fill: #807fe2"\n  />'},N=[],_=[];[j(5),j(10),j(20),f(0,10),f(11,20),f(21,100),y(0,10),y(11,20),y(21,100),w(0,10),w(11,20),w(21,100),v(1,10,1),v(11,20),v(21,100)].forEach(e=>{N.push(e.topic),_.push(...e.items)});const k={course:b,topics:N,items:_};function $(s,n,i=""){const r=e.createContext(null),a=e.createContext(null);return[({children:i})=>{const[o,c]=e.useReducer(s,n);return t.createElement(a.Provider,{value:c},t.createElement(r.Provider,{value:o},i))},function(){const e=t.useContext(r);if(null===e)throw new Error(`${i} useState must be used within a Provider`);return e},function(){const e=t.useContext(a);if(!e)throw new Error(`${i} useDispatch must be used within a Provider`);return e}]}const C="2.0.0",S="Audrius Kovalenko",{navigator:I,screen:q,matchMedia:z,speechSynthesis:B}=window,P=I.userAgent||"",E=-1!==P.indexOf("Chrome/")&&!("brave"in I)&&!/CriOS|Edg|OPR|Brave|Vivaldi|SamsungBrowser|YaBrowser/i.test(P);function O(e,t){return(t?e.find(e=>e[0]===t):void 0)||e[Math.floor(Math.random()*e.length)]}function F(e,t,s=[]){if((e=Array.from(new Set(e.filter(e=>!s.includes(e))))).length<=t)return A(e);const n=[],i=new Set;for(;n.length<t;){const t=O(e);i.has(t)||(n.push(t),i.add(t))}return n}function A(e){const t=[...e];for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}return t}function Q(e,t){return e.reduce((e,s)=>{const n=s[t];return"string"==typeof n&&(e[n]=s),e},{})}function L(e,t,s){return e.reduce((e,n)=>{const i=n[t]||s;return"string"==typeof i&&(e[i]=e[i]||[],e[i].push(n)),e},{})}function M(e,t=!1){const s={"d.":Math.floor(e/86400),"val.":Math.floor(e/3600)%24,"min.":Math.floor(e/60)%60,s:+(e%60).toFixed(1)},n=Object.entries(s).filter(e=>0!==e[1]).map(e=>e[1]+" "+e[0]);return t?n:n.join(" ")}function T(e){return e?e.replace(/[.?!]+$/g,""):""}function D(e){return e.replace(/^.:/g,"")}function R(e){return e.replace(/[ .?,!:;/]/g,"-")}const W=e=>Math.abs(e.split("").map(e=>e.charCodeAt(0)).reduce((e,t)=>e+((e<<7)+(e<<3))^t)).toString(16);function H(e){const t=new Set,s=e.reduce((e,s)=>(t.has(s.tid)||(t.add(s.tid),Object.hasOwn(e,s.cid)||(e[s.cid]=[]),e[s.cid].push(s)),e),{});return t.clear(),s}const J=async(e,t,s,n=!0,i={},r=10,a=[])=>{const o=t[s];let c="function"==typeof o[0].generate?o[0].generate():function(e,t,s={},n=!0){if(e.length<=t)return n?F(e,t):e;const{notMastered:i,failed:r,seen:a}=V(e,s),o=Q(e,"id");for(;i.length<t;){const e=r.length?r:a,t=O(e);e.splice(e.indexOf(t),1),i.push(o[t])}return F(i,t)}(o,r||10,i,n);for(const d of c)Object.hasOwn(e,d.id)||(e[d.id]=d);a.length&&(c=a.map(t=>e[t]));const l=Date.now();return{id:l,start:l,isFinished:!1,topicId:s,questions:c.map(t=>({id:t.id,pid:t.pid,text:t.text,svg:t.svg,type:t.type,variants:U(e,t),speak:t.speak,speakLang:t.speakLang}))}};function U(e,t){if("sentence"===t.type)return A(t.variants);if(Array.isArray(t.variants)){const n=Array.isArray(t.answer)?t.answer:[t.answer];return A((s=[...t.variants.map(t=>function(e,t){const s=t.match(/\${id:(.+)}/)?.[1];return s?e[s].answer:t}(e,t)),...n],[...new Set(s)]))}var s;throw new Error("not supported variants")}function V(e,t={}){const s=new Set(e.map(e=>e.id)),{seen:n,failed:i}=Object.entries(t).reduce((e,[t,n])=>{if(s.has(t)){e[0===n?"seen":"failed"].push(t)}return e},{seen:[],failed:[]}),r=e.filter(e=>!n.includes(e.id)||i.includes(e.id)),a=new Set(r.map(e=>e.id)),o=i.filter(e=>!a.has(e));let c=100*n.length/s.size;return c>100&&(c=100),{progress:c,seen:n,failed:o,notMastered:r}}function K(e,t){let s=0,n=0;const i={},r={},a={};for(const o of e.questions){const e=t[o.id];if(!e)throw new Error(`Question ${o.id} not found`);const c=o.answers||[],l=Array.isArray(e.answer);r[o.id]=l?e.answer.map(e=>o.variants.indexOf(e)):[o.variants.indexOf(e.answer)];let d=!1;if("sentence"===e.type)r[o.id]=e.answer,c[0]!==T(e.answer)&&(d=!0);else if(l){const t=c.map(e=>o.variants[e]).sort().join(",");d=e.answer.sort().join(",")!==t}else 1===c.length&&e.answer===o.variants[c[0]]||(d=!0);d?(i[o.id]=!0,n++):s++,e.explanation&&(a[o.id]=e.explanation)}return{correctCount:s,wrongCount:n,wrong:i,correct:r,explanation:a}}const G="courses/load-success",Y="courses/import-success",X="courses/toggled",Z=(e,t=[],s=[],n=[])=>{const i=[...e.allQuestions.filter(e=>void 0===n.find(t=>t.id===e.id)),...n],r=[...e.courses.filter(e=>void 0===t.find(t=>t.id===e.id)),...t],a=[...e.topics.filter(e=>void 0===s.find(t=>t.id===e.id)),...s];return{courses:r,coursesById:Q(r,"id"),topics:a,topicsById:Q(a,"id"),topicsByCourseId:L(a,"cid"),allQuestions:i,questionsById:Q(i,"id"),questionsByParentId:L(i,"pid"),questionsByTopicId:L(i,"tid"),questionsByCourseId:H(i)}};const ee=new class{dbName="";storeName="";db=null;constructor(e="_mokutis_db",t="docs"){this.dbName=e,this.storeName=t,this.db=null}async _init(){return this.db?this.db:new Promise((e,t)=>{const s=indexedDB.open(this.dbName,1);s.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:"id"})},s.onsuccess=t=>{this.db=t.target.result,e(this.db)},s.onerror=e=>t(e.target.error)})}async get(e){const t=await this._init();return new Promise((s,n)=>{const i=t.transaction(this.storeName,"readonly").objectStore(this.storeName).get(e);i.onsuccess=e=>{if(!e.target.result){const e=new Error;e.status=404,n(e)}s(e.target.result)},i.onerror=e=>n(e.target.error)})}async put(e){const t=await this._init();return new Promise((s,n)=>{const i=t.transaction(this.storeName,"readwrite").objectStore(this.storeName),r={...e,_rev:(e._rev||0)+1},a=i.put(r);a.onsuccess=()=>s(r),a.onerror=e=>n(e.target.error)})}},te=async()=>{try{const{courses:e}=await ee.get("courses"),{topics:t}=await ee.get("topics"),{items:s}=await ee.get("items");return{courses:e||[],topics:t||[],items:s||[]}}catch(e){if(404!==e.status)throw e;return{courses:[],topics:[],items:[]}}},se=async({courses:e,topics:t,items:s})=>Promise.all([ee.put({id:"courses",courses:e}),ee.put({id:"topics",topics:t}),ee.put({id:"items",items:s})]),ne=e=>{if("string"==typeof e)return e;if(!e.text)throw new Error("Missing text");return e.text},ie=(e,t)=>e.reduce((e,[s,n])=>(n===t&&e.push(D(s)),e),[]);function re(e){const t=[],s=[],n=[],i=[];for(const[a,o]of Object.entries(e)){const e="object"==typeof o?{text:o.text??"",...o}:{text:o},r=ne(e);t.push(D(a)),s.push(r),n.push([a,e]),i.push([a,r])}const r={};for(const[,a]of i)r[a]=ie(i,a);return{lang_words:t,lt_words:s,pairs:i,blacklist:r,rawPairs:n}}function ae(e,t,s){const n=re(s),{rawPairs:i,lang_words:r,lt_words:a,blacklist:o}=n,c=[];for(const[l,d]of i){const{text:s,extraVariants:n=[],...i}=d,u=l.startsWith("S:"),h=u||l.startsWith("s:"),p=R(`${t}_${l}`),m=R(`${t}__${l}`),x=D(l);if(u||c.push({id:p,tid:t,cid:e,text:x,answer:s,variants:[s,...F(a,2,[s])],speak:"text",vocab:!0,...i}),c.push({id:m,pid:h?p:void 0,tid:t,cid:e,text:s,answer:x,variants:h?[...T(x).split(" "),...n]:[x,...F(r,2,o[s])],speak:h?void 0:"variants",type:h?"sentence":void 0,vocab:u?{text:x,answer:s}:void 0}),d.conjugations){const s=["io","tu","lui/lei","noi","voi","loro"],n=["present","past","future"],i=["presente","passato","futuro"];d.conjugations.present.includes("-")||n.forEach((n,r)=>{s.forEach((s,a)=>{const o=d.conjugations?.[n];if(o){const l=R(`${p}__${s}__${n.slice(0,2)}`),d=o[a],u=o.filter(e=>e!==d);c.push({id:l,pid:p,tid:t,cid:e,text:`${s} __ (${i[r]})`,answer:d,variants:[d,...F(u,2)],speak:"variants"})}})})}}return{questions:c,dict:n}}re({});const[oe,ce,le]=$((e,t)=>{switch(t.type){case G:return Z({courses:[],topics:[],allQuestions:[]},t.payload.courses,t.payload.topics,t.payload.items);case Y:return Z(e,t.payload.courses,t.payload.topics,t.payload.items);case X:return{...e,courses:e.courses.map(e=>e.id===t.payload?{...e,isEnabled:!1===e.isEnabled}:e)};default:throw new Error(`Unknown courses event: ${JSON.stringify(t)}`)}},{courses:[],coursesById:{},topics:[],topicsById:{},topicsByCourseId:{},allQuestions:[],questionsById:{},questionsByParentId:{},questionsByTopicId:{},questionsByCourseId:{}},"courses"),de=()=>{const t=le(),s=e.useCallback(async()=>{const e=(await x(async()=>{const{default:e}=await import("./index-bAavSm5I.js");return{default:e}},__vite__mapDeps([0,1]))).default,s=(await x(async()=>{const{default:e}=await import("./index-BCvPizXX.js");return{default:e}},__vite__mapDeps([2,1]))).default,n=await te();let i={};try{const e=window.localStorage.getItem("extensions");i=e?JSON.parse(e):i}catch{}const r=[k.course,e.course,s.course,...n.courses].map(e=>({...e,isEnabled:!1!==i[e.id]})),a=[...k.topics,...e.topics,...s.topics,...n.topics],o=[...k.items,...e.items,...s.items,...n.items];t({type:G,payload:{courses:r,topics:a,items:o}})},[t]),n=e.useCallback(async e=>{const s=await te(),n={courses:[...s.courses.filter(t=>!(t.id===e.courses.find(e=>e.id===t.id)?.id)),...e.courses],topics:[...s.topics.filter(t=>!(t.id===e.topics.find(e=>e.id===t.id)?.id)),...e.topics],items:[...s.items.filter(t=>!(t.id===e.items.find(e=>e.id===t.id)?.id)),...e.items]};await se(n),t({type:Y,payload:n})},[t]),i=e.useCallback(e=>{t({type:X,payload:e})},[t]),r=e.useCallback(async e=>{const t=await te(),n={courses:t.courses.filter(t=>t.id!==e),topics:t.topics.filter(t=>t.cid!==e),items:t.items.filter(t=>t.cid!==e)};await se(n),s()},[s]);return{loadCourses:s,importCourse:n,toggleCourse:i,deleteCourse:r}},ue=async e=>ee.put(e),he="profile/load-success",pe="profile/save-success",[me,xe,fe]=$((e,t)=>{switch(t.type){case he:return{...t.payload};case pe:return{...e,...t.payload};default:throw new Error(`Unknown profile event: ${JSON.stringify(t)}`)}},{id:"default",stats:{}},"profile"),ge=()=>{const t=fe();return{loadProfile:e.useCallback(async()=>{const e=await(async(e="profile_default")=>{try{return await ee.get(e)||{id:e,stats:{}}}catch(t){if(404!==t.status)throw t;const s={id:e,name:"default",stats:{}};return ee.put(s).then(()=>ee.get(e))}})();t({type:he,payload:e})},[t]),updateProfile:e.useCallback(async e=>{const s=await ue(e);t({type:he,payload:s})},[t]),resetProfileStats:e.useCallback(async e=>{const s=await ue({...e,stats:{}});t({type:he,payload:s})},[t])}};function je(){return s.jsxs("div",{className:"flex bottom justify-evenly surface-container",children:[s.jsx(n,{to:"/",end:!0,children:s.jsx("button",{className:"circle transparent responsive",children:s.jsx("i",{children:"home"})})}),s.jsx(n,{to:"/stats",children:s.jsx("button",{className:"circle transparent responsive",children:s.jsx("i",{children:"analytics"})})})]})}const ve=(...e)=>e.filter(Boolean).join(" "),we={home:"Pradžia",about:"Apie",extensions:"Plėtiniai",stats:"Statistika",learned:"Išmokta",accuracy:"Tikslumas",speed:"Greitis","are.you.sure":"Ar tikrai?",reset:"Trinti statistiką",yes:"Taip",no:"Ne",import:"Pridėti","multi-table":"Daugybos lentelė","div-table":"Dalybos lentelė",finish:"Baigti",results:"Rezultatai",repeat:"Pakartoti",next:"Kitas",time:"Laikas","all-correct":"Puikiai!",errors:"Klaidos"},ye=e=>we[e]||e,be=()=>({t:ye});function Ne({onClick:e}){const{t:t}=be();return s.jsxs("nav",{className:"drawer",children:[s.jsxs(i,{to:"/about",onClick:e,children:[s.jsx("i",{children:"info"}),s.jsx("span",{className:"max",children:t("about")})]}),s.jsxs(i,{to:"/extensions",onClick:e,children:[s.jsx("i",{children:"extension"}),s.jsx("span",{className:"max",children:t("extensions")})]})]})}const _e="_header_1f9wy_1",ke="_nav_1f9wy_5",$e="_tabs_1f9wy_10",Ce="_toggleColor_1f9wy_14",Se="_icon_1f9wy_21";function Ie(){const t="theme",n="dark",[i,r]=e.useState(()=>window.localStorage.getItem(t)===n),a=i?"nightlight":"light_mode";e.useLayoutEffect(()=>{document.body.classList.toggle(n,i)},[i]);const o=e.useCallback(()=>{r(e=>(window.localStorage.setItem(t,e?"light":n),!e))},[r]);return s.jsx("div",{className:Ce,children:s.jsxs("label",{className:"flex items-center cursor-pointer relative",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:o,className:"cursor-pointer invisible",name:"color-scheme-dark"}),s.jsx("span",{className:Se,children:s.jsx("i",{className:"fill",children:a})})]})})}function qe({size:e=1,className:t,svg:n}){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 480",style:{width:1.5*e+"rem",height:1.5*e+"rem"},className:t,dangerouslySetInnerHTML:{__html:n}})}function ze({svg:e,iconName:t}){return t?s.jsx("i",{children:t}):e?s.jsx(qe,{className:"responsive",svg:e,size:1.25}):s.jsx("i",{children:"extension"})}function Be(){const[t,i]=e.useState(!1),{pathname:a}=r(),{courses:o}=ce(),c=e.useCallback(()=>i(!t),[t,i]);return s.jsxs("div",{className:_e,children:[s.jsxs("nav",{className:ve("top",ke),children:[s.jsx("button",{className:"circle transparent",onClick:c,children:s.jsx("i",{children:"menu"})}),s.jsx("div",{className:ve($e,"tabs max left-align"),children:(o.filter(e=>!1!==e.isEnabled)||[]).map(e=>s.jsx(n,{to:`/${e.id}`,end:e.id.length>0,className:ve("responsive",e.id&&a.includes(`/${e.id}`)&&"active"),children:s.jsx(ze,{...e})},e.id))}),s.jsx(Ie,{})]}),s.jsxs("div",{children:[s.jsx("div",{className:ve("overlay",t&&"active"),onClick:c}),s.jsx("dialog",{className:ve("left no-padding",t&&"active"),open:t,children:s.jsx(Ne,{onClick:c})})]})]})}function Pe({children:e}){return s.jsx("h4",{className:"small",children:e})}const Ee="_table_1s1vw_1",Oe="_th_1s1vw_14",Fe="_selected_1s1vw_18";function Ae({op:t="mul",title:n="multi-table",x:i=6,y:r=5}){const[a,o]=e.useState({x1:i,y1:r}),{x1:c,y1:l}=a;let d,u="×";return"div"===t?(u="÷",d=c>-1&&l>-1&&`${c*l} ÷ ${c} = ${l}`):d=c>-1&&l>-1&&`${l} × ${c} = ${c*l}`,s.jsxs("div",{className:ve("flex flex-col"),children:[s.jsx(Pe,{children:n}),s.jsx("table",{className:Ee,children:s.jsx("tbody",{children:Array.from({length:11},(e,t)=>s.jsx("tr",{children:Array.from({length:11},(e,n)=>{const i=t,r=n;let c=Math.max(((e,t)=>e*t)(i,r),i,r);return 0===i&&0===r&&(c=u),s.jsx("td",{onClick:()=>o(e=>t+n===0?{x1:-1,y1:-1}:{y1:t||e.y1,x1:n||e.x1}),className:ve((0===i||0===r)&&Oe,(n===a.x1||t===a.y1)&&(a.x1<0||a.y1<0||n<=a.x1&&t<=a.y1)&&Fe),children:c},n)})},t))})}),d&&s.jsx("h5",{className:"center-align",children:d})]})}function Qe({children:e}){return s.jsx(s.Fragment,{children:e})}function Le(){const{t:t}=be(),{questionsByTopicId:n}=ce(),[i,r]=e.useState(!1),a=Object.entries((()=>{const e={version:C,author:S,standalone:!!z("(display-mode: standalone)").matches},t=(t,s)=>{void 0!==s&&""!==s&&null!=s&&(e[t]=s)};if(t("vendor",I.vendor),t("platform",I.platform),t("language",I.language),e.tts=E?"Web Speech API":"OSS",e.userAgent=P,e.screenSize=q?`${q.width}x${q.height}`:"",e.devicePixelRatio=window.devicePixelRatio||1,B&&"function"==typeof B.getVoices){const t=B.getVoices();if(t&&t.length){const s=e=>{const t=e.toLowerCase();return t.includes("italia")||t.includes("english")},n=[];for(let e=0;e<t.length;e++){const i=t[e];s(i.name)&&n.push(`${i.name} (${i.lang})`)}n.length&&(e.voices=n.join(", "))}}return e})()).map(([e,t])=>`${e}: ${t}`).join("\n");return s.jsxs(Qe,{children:[s.jsx(Qe.Header,{title:t("about")}),s.jsxs(Qe.Content,{children:[s.jsx("pre",{children:a}),false]})]})}Qe.Header=function({title:e,className:t,...n}){return s.jsx("div",{className:ve(t),...n,children:e&&s.jsx(Pe,{children:e})})},Qe.Content=function({className:e,...t}){return s.jsx("div",{className:ve(e),...t})},Qe.Footer=function({className:e,...t}){return s.jsx("div",{className:ve("mt-auto",e),...t})};const Me={list:"_list_9zeff_1",item:"_item_9zeff_1",canTogggle:"_canTogggle_9zeff_10",toggle:"_toggle_9zeff_15",details:"_details_9zeff_19",open:"_open_9zeff_29"};function Te({children:e}){return s.jsx("ul",{className:ve(Me.list,"list border"),children:e})}function De({title:e,onClose:t}){const{t:n}=be();return s.jsxs("dialog",{open:!0,children:[s.jsx("h5",{children:e}),s.jsx("div",{}),s.jsxs("nav",{className:"right-align no-space",children:[s.jsx("button",{className:"transparent link",onClick:()=>t(!1),children:n("no")}),s.jsx("button",{className:"transparent link",onClick:()=>t(!0),children:n("yes")})]})]})}Te.Item=function({head:t,tail:n,text:i,subText:r,children:a,className:o}){const[c,l]=e.useState(!1),d=e.useCallback(e=>e.stopPropagation(),[]),u=e.useCallback(()=>l(!c),[c,l]);return Array.isArray(a)&&a.every(e=>void 0===e)&&(a=void 0),s.jsxs("li",{className:ve(Me.item,"no-margin",a&&Me.canTogggle,o),onClick:a?u:void 0,children:[s.jsxs("div",{className:ve(Me.headline,"flex items-center max"),children:[t,(i||r)&&s.jsxs("div",{className:ve("ml-sp2 wrap-auto"),children:[s.jsx("strong",{children:i}),r&&s.jsx("div",{className:"italic",children:r})]}),n]}),a&&s.jsx("button",{className:ve(Me.toggle,"circle transparent"),children:s.jsx("i",{children:c?"expand_less":"expand_more"})}),a&&s.jsx("div",{className:ve(Me.details,c&&Me.open),onClick:d,children:a})]})};const Re=async()=>{const e=document.createElement("input");return e.type="file",e.accept=".json.gz",new Promise(t=>{e.onchange=async e=>{const s=e.target.files[0],n=await(async e=>{const t=e.stream().pipeThrough(new DecompressionStream("gzip")),s=await new Response(t).text();return JSON.parse(s)})(s);t(n)},e.click()})};function We({svg:e}){return e?s.jsx(qe,{svg:e,size:1.5}):s.jsx("i",{children:"extension"})}function He(){const{t:t}=be(),{importCourse:n,toggleCourse:i,deleteCourse:r}=de(),{courses:a}=ce(),[o,c]=((t,s="")=>{const[n,i]=e.useState(()=>{try{return window.localStorage.getItem(t)||s}catch{return s}}),r=e.useCallback(e=>{try{i(e),window.localStorage.setItem(t,e)}catch{}},[t]);return e.useLayoutEffect(()=>{try{const e=window.localStorage.getItem(t);e&&i(e)}catch{}},[t]),[n,r]})("extensions"),[l,d]=e.useState(""),u=e.useMemo(()=>JSON.parse(o||"{}"),[o]);return s.jsxs(Qe,{children:[s.jsx(Qe.Header,{title:t("extensions")}),s.jsxs(Qe.Content,{children:[s.jsx(Te,{children:a.map(e=>s.jsx(Te.Item,{text:e.name,head:s.jsx(We,{...e}),tail:s.jsxs("span",{className:"ml-auto flex",children:[s.jsxs("label",{className:"switch ml-auto",children:[s.jsx("input",{type:"checkbox",checked:!1!==u[e.id],onChange:t=>{const s={...u,[e.id]:t.target.checked};t.target.checked&&delete s[e.id],c(JSON.stringify(s)),i(e.id)}}),s.jsx("span",{})]}),s.jsx("button",{className:"transparent circle",disabled:["math","en","it"].includes(e.id),onClick:()=>d(e.id),children:s.jsx("i",{className:"large ml-sp2 disabled",children:"delete"})})]})},e.id))}),s.jsx("div",{className:"center-align large-padding",children:s.jsx("button",{onClick:async()=>{try{const e=await Re();n(e)}catch(e){console.error("Failed to copy: ",e)}},type:"button",className:"mt-sp2 small-round",children:t("import")})}),l&&s.jsx(De,{title:t("are.you.sure"),onClose:e=>{e&&r(l),d("")}})]})]})}const Je=()=>{const t=Ye(),s=xe(),{updateProfile:n}=ge(),i=e.useCallback(()=>{if(t&&t.isFinished&&t.id>0){const e=function(e={},t){const{wrong:s,wrongCount:n,questions:i}=t,r=t.topicId,a=(t.time+(e[r]||t.time))/2,o=(e.keys||"").split(" ");0!==n||o.includes(r)||o.push(r);const c={...e,[r]:a,keys:o.join(" ").trim()};return i.forEach(({id:e})=>{const t=s[e],n=Number(c[e]||0);c[e]=t?3:Math.max(n-1,0)}),c}(s.stats,t);return n({...s,stats:e}),!0}return!1},[t,s,n]);return((t,s)=>{let n=!0;const i=e.useRef(null);e.useEffect(()=>{if(null!=t)return i.current!==t&&Promise.resolve(s()).then(e=>{n&&e&&(i.current=t)}),()=>{n=!1}},[t,s])})(t?.id,i),null},Ue="quiz/start",Ve="quiz/finish",Ke="quiz/answer-question",[Ge,Ye,Xe]=$((e,t)=>{switch(t.type){case Ue:return{...t.payload};case Ve:return!e||e.isFinished?e:{...e,...K(e,t.payload),isFinished:!0,time:Date.now()-e.start,ts:Date.now()};case Ke:{if(!e||e.isFinished)return e;const{id:s,answers:n}=t.payload,{questions:i}=e;return{...e,questions:i.map(e=>e.id===s?{...e,answers:n}:{...e})}}default:throw new Error(`Unknown questions event: ${JSON.stringify(t)}`)}},void 0,"quiz"),Ze=()=>{const t=Xe(),{questionsById:s,questionsByTopicId:n,topicsById:i}=ce(),{stats:r}=xe();return{startQuiz:e.useCallback(async(e,a=[])=>{const o=!1!==i[e]?.shuffle,c=await J(s,n,e,o,r,a.length,a);return t({type:Ue,payload:c}),new Promise(e=>setTimeout(e,100))},[t,s,n,r,i]),finishQuiz:e.useCallback(async()=>(t({type:Ve,payload:s}),new Promise(e=>setTimeout(e,100))),[t,s]),answerQuestion:e.useCallback((e,s)=>{t({type:Ke,payload:{id:e,answers:s}})},[t])}},et=({children:e})=>s.jsxs(Ge,{children:[s.jsx(Je,{}),e]});function tt(){const{t:n}=be(),o=a(),c=r(),{startQuiz:l}=Ze(),d=ce(),{questionsByTopicId:u,courses:h,topicsByCourseId:p}=d,{stats:{keys:m}}=xe(),x=c.pathname.substring(1)||h[0]?.id,f=e.useMemo(()=>p[x]||[],[p,x]),g=e.useMemo(()=>{const e=new Set;return f.forEach((t,s,n)=>{s>0&&((e,t="")=>(e.startsWith("en")||e.startsWith("it"))&&!t.includes(e))(n[s-1].id,m)&&e.add(t.id)}),e},[f,m]);return s.jsxs(Qe,{children:[s.jsx(Qe.Header,{title:n("home")}),s.jsx(Qe.Content,{children:f.map(({id:e,name:n},r)=>{return s.jsxs(t.Fragment,{children:[s.jsxs("div",{className:ve("flex items-center",(r+1)%3!=0&&"pb-sp1"),children:[s.jsx("button",{disabled:g.has(e),className:ve("responsive small-round m-0 mr-sp1"),onClick:()=>(e=>{l(e).then(()=>o("/quiz"))})(e),children:n}),(a=e,c=g.has(e),u[a][0].vocab&&!c?s.jsx(i,{to:`/words/${a}`,children:s.jsx("i",{className:"large",children:"import_contacts"})}):a.startsWith("mul")?s.jsx(i,{to:"/mtable",children:s.jsx("i",{className:"large",children:"import_contacts"})}):a.startsWith("div")?s.jsx(i,{to:"/dtable",children:s.jsx("i",{className:"large",children:"import_contacts"})}):c?s.jsx("div",{children:s.jsx("i",{className:"large",children:"lock"})}):s.jsx("div",{children:s.jsx("i",{className:"large",children:" "})}))]}),r+1<f.length&&(r+1)%3==0&&s.jsx("hr",{className:"small"})]},r);var a,c})})]})}let st=null,nt=null;const it=/\([^)]+\)/gm,rt=(e,t="en",s=()=>{},n=()=>{})=>{if(!e)return;if(!E){const s=(e=>{const t=[W(e)];for(let s=0;s<6;s++)t.push(W(t[s]+e));return t.join("").slice(-32)})(e);return nt&&(nt.pause(),nt=null),t=t.split("-")[0],nt=new Audio(`/audio/${t}/${s}.oga`),void nt.play()}const i=window.speechSynthesis;st&&i.cancel(),e=e.replace(it,"").trim(),st=new SpeechSynthesisUtterance(e),t.startsWith("it")?(st.lang="it-IT",st.rate=1):(st.lang="en-US",st.rate=.8),s&&st.addEventListener("start",s),n&&st.addEventListener("end",n),i.speak(st)},at=({text:t,lang:n="en",className:i="small",asLink:a=!1,size:o,children:c})=>{const{pathname:l}=r();l.includes("/en")&&(n="en"),l.includes("/it")&&(n="it"),e.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]);const d=e.useCallback(e=>{e.stopPropagation(),rt(t,n)},[t,n]),u=a?"a":"button";return s.jsx(u,{onClick:d,className:ve("border small-round square",i),children:c||s.jsx("i",{className:ve("fill",o),children:"volume_up"})})},ot="_option_1pb6x_1",ct="_max_1pb6x_8";function lt({options:e,checked:t=[],onChange:n,disabled:i,getClassName:r=()=>"",long:a,speak:o,speakLang:c,topicId:l}){return s.jsx("div",{className:"flex flex-col",children:e.map((e,d)=>i?s.jsx("button",{disabled:!0,className:ve("border small-round large",ot,r(d).includes("success")?"success":t.includes(d)?"error":"fill",a?"responsive":ct),onClick:()=>n(d,!0,{replace:!0}),children:e},d):s.jsxs("div",{className:"flex",children:[s.jsx("button",{className:ve("border small-round large",ot,t.includes(d)?"primary":"fill",a?"responsive":ct),onClick:()=>n(d,!0,{replace:!0}),children:e}),o&&s.jsx(at,{text:e,lang:c||l,className:"large"})]},d))})}const dt={backgroundColor:"var(--highlight)"},ut=({parts:e,n:t})=>s.jsx("p",{style:{whiteSpace:"pre-line"},children:e.map((e,n)=>s.jsx("span",{className:"medium-line",style:n===t?dt:void 0,children:e+" "},n))}),ht=/ \(=[^)]+\)/gm,pt=({text:t,lang:n="en"})=>{const[i]=e.useState((e=>{const t=[],s=new Set([",",".","!","?",":",";","”",'"']);let n=[],i=0;const r=()=>{const e=n.length>0?n.join(""):"";e&&"."!==e&&t.push(e)};let a="";for(;i<e.length;){const t=e[i];a||"“"!==t&&'"'!==t?("“"===a&&"”"===t||'"'===a&&'"'===t)&&(a=""):a=t,n.push(t),!a&&s.has(t)&&(r(),n=[]),i++}return r(),{read:t.map(e=>e.replace(ht,"").trim()),parts:t}})(t)),[r,a]=e.useState(-1);e.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]);const o=e.useCallback(()=>{const e=t=>{rt(i.read[t],n,()=>a(t),()=>t===i.read.length?a(-1):e(t+1))};e(0)},[n,i]);return s.jsxs("div",{children:[s.jsx("button",{onClick:o,className:"btn btn-lg",children:s.jsx("i",{className:"fill",children:"volume_up"})}),s.jsx(ut,{parts:i.parts,n:r})]})},mt="_explanation_vado5_1";function xt({topicId:e,text:t,subText:n,svg:i,explanation:r,body:a,footer:o,speak:c,speakLang:l,read:d}){return s.jsxs(Qe,{children:[s.jsxs(Qe.Content,{children:[i&&i.length>0&&s.jsx("div",{className:"small-padding flex",children:i.map((e,t)=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,viewBox:e.viewBox,className:e.className,dangerouslySetInnerHTML:{__html:e.g}},e.width+"-"+t))}),t&&s.jsxs("div",{className:"r",children:[!d&&s.jsxs("div",{className:"le",children:[!d&&s.jsx("h6",{className:"bold small-padding",children:t}),c&&s.jsx("div",{className:"mb-sp2",children:s.jsx(at,{text:c,lang:l||e,className:""})})]}),d&&s.jsx("div",{className:"h5 small-padding",children:s.jsx(pt,{text:d,lang:l||e})}),n&&s.jsx("div",{children:n})]}),a&&s.jsx(a,{}),r&&s.jsx("p",{className:mt,children:r})]}),s.jsx(Qe.Footer,{children:o&&s.jsx(o,{})})]})}const ft="_sentence_elsah_1";function gt({disabled:t=!1,correct:n,answer:i="",words:r=[],onFinish:a=()=>{}}){const{t:o}=be(),[c,l]=e.useState(i?i.split(" ").map(e=>r.indexOf(e)):[]);if(t){const e=n!==(i=function(e,t){for(const s of[".","?","!"])if(e.endsWith(s)&&!t.endsWith(s))return t+s;return t}(n,i));return s.jsxs("div",{className:ve("flex flex-col"),children:[e&&s.jsx("button",{disabled:!0,className:ve("border small-round large error",ot),children:i}),s.jsx("button",{disabled:!0,className:ve("border small-round large success",ot),children:n})]})}return s.jsxs("div",{className:ve("flex flex-col"),children:[s.jsx("div",{className:ft,children:c.map((e,t)=>s.jsx("button",{className:ve("chip tiny-margin",r.length<5&&"large"),onClick:()=>l(c.filter(t=>t!==e)),children:r[e]},t))}),s.jsx("br",{}),s.jsx("div",{className:"center-align",children:r.map((e,t)=>s.jsx("button",{className:ve("chip tiny-margin",c.includes(t)?"":"inverse-primary-border",r.length<5&&"large"),disabled:c.includes(t),onClick:()=>l([...c,t]),children:(c.includes(t),e)},t))}),s.jsx("br",{}),!1===t&&s.jsx("button",{className:"border small-round large fill",onClick:()=>a(c.map(e=>r[e]).join(" ")),children:o("next")})]})}class jt extends t.Component{state={};static getDerivedStateFromProps(e,t){const{currentQuestion:s}=e;return s&&s.id!==t.questionId?{answers:s.answers||[],questionId:s.id}:null}onAnswer=(e,t,{replace:s}={})=>{let n=this.state.answers;n=t&&s?[e]:t?[...n,e]:n.filter(t=>t!==e),this.setState({answers:n},()=>this.props.nextQuestionNumber?this.onNext():this.onFinish())};onPrev=()=>this.props.navigate(`/quiz/${this.props.prevQuestionNumber}`);onNext=()=>{const{navigate:e,answerQuestion:t,nextQuestionNumber:s}=this.props,{questionId:n,answers:i}=this.state;t(n,i),e(`/quiz/${s}`)};onFinish=()=>{const{questionId:e,answers:t}=this.state;this.props.answerQuestion(e,t),this.props.finishQuiz(),this.props.navigate("/quiz/results")};getClassName=e=>{const{quiz:t,currentQuestion:s}=this.props;if(t.isFinished){const n=s.id;if(t.correct[n].includes(e))return ve("success")}return""};render(){const{t:e,currentQuestion:t,showResults:i,nextQuestionNumber:r,prevQuestionNumber:a,quiz:o}=this.props;if(!t)return this.props.navigate("/");if(i)return this.props.navigate("/quiz/results");const{type:c,text:l,variants:d,svg:u,speak:h="",speakLang:p}=t,{answers:m,questionId:x}=this.state,f=o.explanation&&o.explanation[x],g=this.props.quiz.isFinished;return s.jsx(xt,{topicId:o.topicId,text:l,svg:u,explanation:f,body:()=>"sentence"===c?s.jsx(gt,{disabled:g,answer:m[0],correct:o.correct?.[x],words:d,onFinish:e=>this.onAnswer(e,!0,{replace:!0})}):s.jsx(lt,{topicId:o.topicId,type:c,checked:m,options:d,getClassName:this.getClassName,disabled:g,onChange:this.onAnswer,speak:h.includes("variants"),speakLang:p,long:Boolean(h)},x),footer:()=>s.jsxs("div",{className:"center-align large-padding",children:[s.jsxs("div",{className:"large-padding",children:[s.jsx("button",{className:"no-padding square",onClick:this.onPrev,disabled:!a,children:s.jsx("i",{children:"chevron_backward"})}),s.jsxs("span",{children:[this.props.questionNumber," / ",this.props.questionCount]}),s.jsx("button",{className:"no-padding square",onClick:this.onNext,disabled:!r,children:s.jsx("i",{children:"chevron_forward"})})]}),this.props.quiz.isFinished?s.jsx(n,{to:"/quiz/results",children:s.jsx("button",{className:"fill small-round",children:e("results")})}):s.jsx("button",{className:"fill small-round",onClick:this.onFinish,children:e("finish")})]}),speakLang:p,speak:h.includes("text")?l:void 0,read:h.includes("long")?l:void 0})}}const vt=(wt=jt,function(e){const{t:t}=be(),n=a(),i=o(),{answerQuestion:r,finishQuiz:c}=Ze(),l=Ye(),d=Number(i.questionNumber||1),u=l?.questions?.length??0,h=d>1?d-1:void 0,p=d<u?d+1:void 0,m={...e,t:t,navigate:n,params:i,answerQuestion:r,finishQuiz:c,quiz:l,questionNumber:d,questionCount:u,currentQuestion:l.questions[d-1],prevQuestionNumber:h,nextQuestionNumber:p,showResults:!i.questionNumber&&l.isFinished};return s.jsx(wt,{...m})});var wt;const yt="_numbers_kwdjd_1",bt="_number_kwdjd_1",Nt=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"];function _t(){const t=e.useRef(null);return e.useEffect(()=>{if(t.current){new c(t.current,{colors:Nt,particleCount:50,force:.3}).explode()}},[]),s.jsx("div",{ref:t,style:{position:"relative",left:"30%",height:"2px"}})}const kt=()=>{const{t:e}=be(),t=a(),n=Ye(),{startQuiz:r}=Ze(),{questions:o,wrongCount:c,wrong:l,time:d,ts:u}=n,h=c?`${e("errors")}: ${c}`:e("all-correct"),p=`${e("time")}: ${M(d/1e3)}`;if(!n.isFinished)return s.jsx("div",{children:"No quiz"});return s.jsxs("div",{children:[s.jsx("h6",{children:h}),s.jsx("h6",{children:p}),(0===c||2===o.length)&&Date.now()-u<2e3&&s.jsx(_t,{}),s.jsx("ul",{className:yt,children:o.map((e,t)=>((e,t,n)=>{const r=e.id in n?"error":"success";return s.jsx("li",{className:ve(r,bt),children:s.jsx(i,{to:`/quiz/${t}`,children:t})},t)})(e,`${t+1}`,l))}),s.jsx("button",{className:"fill small-round",onClick:()=>{r(n.topicId).then(()=>t("/quiz"))},children:e("repeat")})]})},$t={circleBg:"_circleBg_lw860_1",circle:"_circle_lw860_1",title:"_title_lw860_13",green:"_green_lw860_21",yellow:"_yellow_lw860_25",red:"_red_lw860_29",value:"_value_lw860_33",up:"_up_lw860_46"},Ct=100/(2*Math.PI),St=2*Ct,It=`M 24 2.0845\n   a ${Ct} ${Ct} 0 0 1 0 ${St}\n   a ${Ct} ${Ct} 0 0 1 0 -${St}`;function qt({percentage:e=0,className:t,title:n="",value:i,onClick:r=()=>{}}){const a=function(e){if(e>79)return $t.green;if(e>49)return $t.yellow;return $t.red}(e);return void 0===i&&(i=[(e<100?e.toFixed(2):e)+"%"]),s.jsx("div",{className:t,onClick:r,children:s.jsxs("div",{children:[s.jsx("div",{className:ve($t.value,i.length>1&&$t.up),children:i.map((e,t)=>s.jsx("span",{children:e},t))}),s.jsxs("svg",{viewBox:"0 0 48 48",className:ve($t.circularChart),children:[s.jsx("path",{className:$t.circleBg,d:It}),s.jsx("path",{className:ve($t.circle,a),strokeDasharray:`${e}, 100`,d:It}),s.jsx("text",{x:24,y:40.8,className:$t.title,children:n})]})]})})}function zt({svg:e}){return e?s.jsx(qe,{svg:e,size:1.5}):s.jsx("i",{children:"extension"})}function Bt(){const{t:t}=be(),n=a(),i=ce(),{courses:r,coursesById:o,topicsById:c,questionsByTopicId:l}=i,[d,u]=e.useState(!1),h=xe(),{resetProfileStats:p}=ge(),{startQuiz:m}=Ze(),x=((e,t)=>{const s=t.stats||{},n=Object.entries(s).reduce((e,[t,s])=>{const n=t.split("_")[0];if(n===t)return e;const i=e[n]||{correct:0,total:0};return e[n]={correct:i.correct+(0===s?1:0),total:i.total+1},e},{}),i=Object.keys(e).reduce((t,i)=>{if(Object.hasOwn(n,i)){const{correct:r,total:a}=n[i];t.push({...n[i],tid:i,accuracy:r/a*100,speed:s[i]/1e3,progress:V(e[i],s).progress})}return t},[]);return Object.entries(i.reduce((t,s)=>{const n=e[s.tid][0].cid;return t[n]=t[n]||[],t[n].push(s),t},{}))})(l,h),f="relative min-w-[100px] max-w-[350px]";return s.jsxs(Qe,{children:[s.jsx(Qe.Header,{title:t("stats")}),s.jsx(Qe.Content,{children:s.jsx(Te,{children:x.map(([e,i])=>{return s.jsx(Te.Item,{text:o[e].name,head:s.jsx(zt,{...(a=e,r.find(e=>e.id===a)||r[0])}),children:i.map(e=>s.jsxs("div",{children:[s.jsx("h6",{children:c[e.tid].name}),s.jsxs("div",{className:"grid",children:[s.jsx(qt,{onClick:()=>m(e.tid).then(()=>n("/quiz")),percentage:e.progress,className:ve(f,"s4","cursor-pointer"),title:t("learned")}),s.jsx(qt,{percentage:e.accuracy,className:ve(f,"s4"),title:t("accuracy")}),s.jsx(qt,{percentage:e.speed<50?100:e.speed<70?90:e.speed<140?66:e.speed<210?33:0,value:M(e.speed,!0),className:ve(f,"s4"),title:t("speed")})]})]},e.tid))},e);var a})})}),s.jsxs(Qe.Footer,{children:[x.length>0&&s.jsx("div",{className:"center-align large-padding",children:s.jsx("button",{className:"mt-sp2 small-round",onClick:()=>u(!0),children:t("reset")})}),d&&s.jsx(De,{title:t("are.you.sure"),onClose:e=>{u(!1),e&&p(h)}})]})]})}function Pt({topicId:e,text:t}){return s.jsx(at,{asLink:!0,className:"no-border no-padding no-margin small",lang:e,text:t,children:t})}function Et({topicId:e,conjugations:{present:t=[],past:n=[],future:i=[],imperfect:r=[]}}){return s.jsxs("table",{className:ve("border no-space small-text wrap-auto"),onClick:e=>{e.stopPropagation()},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{}),s.jsx("th",{children:"io"}),s.jsx("th",{children:"tu"}),s.jsx("th",{children:"Lei/lui/lei"}),s.jsx("th",{children:"noi"}),s.jsx("th",{children:"voi"}),s.jsx("th",{children:"loro"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:ve("italic lg"),children:"presente"})}),t.map((t,n)=>s.jsx("td",{children:s.jsx(Pt,{topicId:e,text:t})},t+n))]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:ve("italic lg"),children:"passato prossimo"})}),n.map((t,n)=>s.jsx("td",{children:s.jsx(Pt,{topicId:e,text:t})},t+n))]}),r.length>0&&s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:ve("italic lg"),children:"imperfetto"})}),r.map((t,n)=>s.jsx("td",{children:s.jsx(Pt,{topicId:e,text:t})},t+n))]}),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:ve("italic lg"),children:"futuro semplice"})}),i.map((t,n)=>s.jsx("td",{children:s.jsx(Pt,{topicId:e,text:t})},t+n))]})]})]})}function Ot({rows:e=[]}){const[t,...n]=e;return s.jsxs("table",{className:ve("border no-space small-text wrap-auto"),onClick:e=>{e.stopPropagation()},children:[s.jsx("thead",{children:s.jsx("tr",{children:t.map((e,t)=>s.jsx("th",{children:e},e+t))})}),s.jsx("tbody",{children:n.map((e,t)=>s.jsx("tr",{children:e.map((e,t)=>s.jsxs("td",{children:[" ",e," "]},e+t))},t))})]})}function Ft(){const{id:t}=o(),n=a(),{questionsByTopicId:i,topicsById:r,questionsByParentId:c}=ce(),{startQuiz:l}=Ze();let d=i[t];const u=d[0];return d=("function"==typeof u.vocab?u.vocab():d).filter(e=>Boolean(e.vocab)),e.useCallback(e=>{const s=e.reduce((e,t)=>{e.push(t.id);const s=c[t.id];return s&&s.length&&e.push(...s.map(e=>e.id)),e},[]);l(t||"",s).then(()=>n("/quiz"))},[t,n,c,l]),d?s.jsxs(Qe,{children:[s.jsx(Qe.Header,{title:r[t].name+` (${d.length})`}),s.jsx(Qe.Content,{children:s.jsx(Te,{children:d.map(e=>s.jsxs(Te.Item,{head:s.jsx(at,{text:"object"==typeof e.vocab&&e.vocab?.text||e.text,lang:t,className:"no-padding no-margin"}),text:"object"==typeof e.vocab&&e.vocab?.text||e.text,subText:"object"==typeof e.vocab&&e.vocab?.answer||e.answer,children:[e.conjugations?s.jsx(Et,{...e,topicId:t}):void 0,Array.isArray(e.table)?s.jsx(Ot,{rows:e.table}):void 0,void 0]},e.id))})})]}):null}function At(){const{t:e}=be();return s.jsxs(l,{children:[s.jsx(d,{path:"/about",element:s.jsx(Le,{})}),s.jsx(d,{path:"/extensions",element:s.jsx(He,{})}),s.jsx(d,{path:"/mtable",element:s.jsx(Ae,{title:e("multi-table")})}),s.jsx(d,{path:"/dtable",element:s.jsx(Ae,{title:e("div-table"),op:"div"})}),s.jsxs(d,{element:s.jsx(Qt,{}),children:[s.jsx(d,{path:"/words/:id",element:s.jsx(Ft,{})}),s.jsx(d,{path:"/stats",element:s.jsx(Bt,{})}),s.jsx(d,{path:"/quiz/results",element:s.jsx(kt,{})}),s.jsx(d,{path:"/quiz/:questionNumber?",element:s.jsx(vt,{})}),s.jsx(d,{path:"/:course?",element:s.jsx(tt,{})})]})]})}function Qt(){return s.jsx(et,{children:s.jsx(u,{})})}function Lt(){const t=e.useRef(null),{pathname:n}=r(),{courses:i}=ce(),{loadProfile:a}=ge(),{loadCourses:o}=de();return e.useEffect(()=>{a(),o()},[o,a]),e.useLayoutEffect(()=>{t.current?.scrollTo({top:0,left:0,behavior:"instant"})},[n]),s.jsxs(s.Fragment,{children:[s.jsx(Be,{}),s.jsx("main",{className:"responsive flex flex-col",ref:t,children:i.length>0?s.jsx(At,{}):s.jsx("progress",{className:"circle"})}),s.jsx(je,{})]})}function Mt({children:e}){return s.jsx(oe,{children:s.jsx(me,{children:s.jsx(h,{children:e})})})}p.createRoot(document.getElementById("root")).render(s.jsx(t.StrictMode,{children:s.jsx(Mt,{children:s.jsx(Lt,{})})}));export{O as a,re as b,F as c,ae as v};
